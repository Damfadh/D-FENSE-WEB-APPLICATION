<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D-FENSE - Data-driven Fitness and Evaluation for Nutritional Support and Empowerment</title>
    <meta name="description" content="Sistem skrining risiko metabolik berbasis nutrigenomik untuk komunitas Indonesia di daerah 3T">
    <meta name="keywords" content="nutrigenomik, metabolik, kesehatan, genetik, gaya hidup, Indonesia">
    <meta name="author" content="Universitas Pertahanan Republik Indonesia">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzA5MDkwYiIvPgo8cGF0aCBkPSJNOSAxMC41aDZhNy41IDcuNSAwIDAgMSAwIDE1SDlWMTJhMS41IDEuNSAwIDAgMSAxLjUtMS41eiIgZmlsbD0iIzAwZDlmZiIvPgo8cGF0aCBkPSJNMjMgMTAuNUgxN2E3LjUgNy41IDAgMCAwIDAgMTVoNlYxMmExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBmaWxsPSIjZmY0MDZkIi8+Cjwvc3ZnPgo=">
    
    <!-- D-FENSE Brand Colors CSS Variables -->
    <style>
        :root {
            --d-fense-crimson: #DC143C;
            --d-fense-pink: #F75270;
            --d-fense-light-pink: #F7CAC9;
            --d-fense-cream: #FDEBD0;
        }
        
        /* Loading Screen Styles */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--d-fense-cream) 0%, var(--d-fense-light-pink) 50%, var(--d-fense-pink) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }
        
        .loading-content {
            text-center;
            color: var(--d-fense-crimson);
        }
        
        .spinner {
            border: 4px solid rgba(220, 20, 60, 0.1);
            border-left-color: var(--d-fense-crimson);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-bar {
            width: 200px;
            height: 4px;
            background: rgba(220, 20, 60, 0.2);
            border-radius: 2px;
            overflow: hidden;
            margin: 1rem auto;
        }
        
        .loading-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--d-fense-crimson), var(--d-fense-pink));
            border-radius: 2px;
            width: 0%;
            animation: progress 2s ease-out forwards;
        }
        
        @keyframes progress {
            to { width: 100%; }
        }
        
        /* Hide loading screen when app is ready */
        .app-ready #loading-screen {
            opacity: 0;
            pointer-events: none;
        }
        
        /* Ensure the root div takes full height */
        #root {
            min-height: 100vh;
        }
        
        /* Basic reset and font setup */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            line-height: 1.6;
            color: #333;
            overflow-x: hidden;
        }
    </style>
    
    <!-- Meta tags for better SEO -->
    <meta property="og:title" content="D-FENSE - Sistem Skrining Risiko Metabolik">
    <meta property="og:description" content="Nutrigenomik untuk komunitas Indonesia di daerah 3T">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://d-fense.app">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="D-FENSE - Data-driven Fitness and Evaluation">
    <meta name="twitter:description" content="Sistem skrining risiko metabolik berbasis nutrigenomik">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <h1 style="font-size: 2rem; font-weight: bold; margin-bottom: 0.5rem;">D-FENSE</h1>
            <p style="font-size: 1rem; margin-bottom: 0.25rem;">Data-driven Fitness and Evaluation</p>
            <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 1rem;">for Nutritional Support and Empowerment</p>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p style="font-size: 0.8rem; opacity: 0.7;">Memuat aplikasi...</p>
        </div>
    </div>
    
    <!-- React App Root -->
    <div id="root"></div>
    
    <!-- Main Application Script -->
    <script type="module" src="/main.tsx"></script>
    
    <!-- JavaScript -->
    <script>
        // Simple loading screen management
        document.addEventListener('DOMContentLoaded', function() {
            // Simulate loading time for better UX
            setTimeout(function() {
                document.body.classList.add('app-ready');
                
                // Remove loading screen completely after transition
                setTimeout(function() {
                    const loadingScreen = document.getElementById('loading-screen');
                    if (loadingScreen) {
                        loadingScreen.remove();
                    }
                }, 500);
            }, 2000);
        });
        
        // Error handling
        window.addEventListener('error', function(e) {
            console.error('Application error:', e.error);
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.innerHTML = `
                    <div class="loading-content">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">⚠️</div>
                        <h2 style="color: var(--d-fense-crimson); margin-bottom: 1rem;">Error Loading D-FENSE</h2>
                        <p style="margin-bottom: 1rem;">Terjadi kesalahan saat memuat aplikasi.</p>
                        <button onclick="window.location.reload()" style="
                            background: var(--d-fense-crimson);
                            color: white;
                            border: none;
                            padding: 10px 20px;
                            border-radius: 5px;
                            cursor: pointer;
                            font-size: 1rem;
                        ">Muat Ulang</button>
                    </div>
                `;
            }
        });
        
        // Prevent loading screen from staying too long
        window.addEventListener('load', function() {
            setTimeout(function() {
                if (!document.body.classList.contains('app-ready')) {
                    console.log('Force removing loading screen after 5 seconds');
                    document.body.classList.add('app-ready');
                }
            }, 5000);
        });
    </script>
    
    <!-- Schema.org JSON-LD for better SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "D-FENSE",
        "description": "Sistem skrining risiko metabolik berbasis nutrigenomik untuk komunitas Indonesia",
        "url": "https://d-fense.app",
        "applicationCategory": "HealthApplication",
        "operatingSystem": "Web Browser",
        "creator": {
            "@type": "Organization",
            "name": "Universitas Pertahanan Republik Indonesia"
        },
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "IDR"
        }
    }
    </script>
</body>
</html>